# 問題番号20
## 基本情報
- トピック : シェーカーソート
- 問題リンク : https://drive.google.com/file/d/1TIx0AkrxxxW1MZxFGCpplkjHJe4mMUDP/view?usp=share_link
- 解答リンク : https://atcoder.jp/contests/math-and-algorithm/submissions/37035092
- 解答人数 : 11
- 解答者ID : 1 2 3 4 5 6 7 8 9 10 11
## ソースコード
```py
1  def shaker_sort(arr):
2      left = 0
3      right = len(arr) - 1
4      while right > left:
5          last = -1
6          i = left
7          while i < right:
8              if arr[i] > arr[i + 1]:
9                  arr[i], arr[i + 1] = arr[i + 1], arr[i]
10                 last = i
11             i += 1
12         i = right = last
13         while i > left:
14             if arr[i - 1] > arr[i]:
15                 arr[i - 1], arr[i] = arr[i], arr[i - 1]
16                 last = i
17             i -= 1
18         left = last
19     return arr
20 
21 
22 N = int(input())
23 A = list(map(int, input().split()))
24 
25 print(*shaker_sort(A))
```
## 重要度の結果
★: 1st, ●: 2nd, ▲: 3rd
```py
def shaker_sort(arr):                                   1  
    left = 0                                            2  
    right = len(arr) - 1                                3  ▲
    while right > left:                                 4  ★●▲
        last = -1                                       5  ▲
        i = left                                        6  
        while i < right:                                7  ★●
            if arr[i] > arr[i + 1]:                     8  ★▲
                arr[i], arr[i + 1] = arr[i + 1], arr[i] 9  ★▲▲
                last = i                                10 ●
            i += 1                                      11 ▲
        i = right = last                                12 ★★●●●▲▲
        while i > left:                                 13 ★●▲
            if arr[i - 1] > arr[i]:                     14 ●●
                arr[i - 1], arr[i] = arr[i], arr[i - 1] 15 ●
                last = i                                16 
            i -= 1                                      17 ★★
        left = last                                     18 ●▲
    return arr                                          19 
                                                        20 
                                                        21 
N = int(input())                                        22 
A = list(map(int, input().split()))                     23 
                                                        24 
print(*shaker_sort(A))                                  25 ★★
```
## 重要な理由の結果
### 1行目
`def shaker_sort(arr):`
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 2行目
`    left = 0`
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 3行目
`    right = len(arr) - 1`
#### 1位 0人
#### 2位 0人
#### 3位 1人
- 10 1、2番に気をつけて、rightを一番後ろで初期化することが重要だから。
### 4行目
`    while right > left:`
#### 1位 1人
- 6 左右それぞれにソート済みの範囲を持ち、これらが重ならない限り続けるという、シェーカーソートの特徴を表している。
#### 2位 1人
- 7 シェーカーソートでは，右から，左からの2通りの方向からのソートを行い，徐々に左右の範囲を狭めていくことでより効率的にソートを行うものであり，この行で「左右の範囲を絞りながらソートと行っている」ということが読み取れると思うから．
1番でない理由としては，この行だけでは具体的にどのようにそれぞれをソートしているのかといった，アルゴリズム全体を把握するのに不十分であるから．
#### 3位 1人
- 2 シェーカーソートの終了条件を表しており、上二つと比べると細かい部分だが、これを正確に指定しないと無限ループや微妙にソートされないなどがおこるので、3番目に重要だと感じた。
### 5行目
`        last = -1`
#### 1位 0人
#### 2位 0人
#### 3位 1人
- 1 最後に更新が行われた場所に着目するというシェーカーソートの考え方をよく表している行だと考えて選択した．1,2番目が表している考え方の方がより本質的と考えて3番目とした．
### 6行目
`        i = left`
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 7行目
`        while i < right:`
#### 1位 1人
- 2 シェーカーソートは左右にバブルソートをやるアルゴリズムで、幅が左右からどんどん狭まっていくのが特徴なので、右端をきちんと限定している行が最重要だと考えた。
#### 2位 1人
- 3 13行目と合わせて、ほとんどバブルソートと変わらない実装でも多少効率が良くなるのはここの探索順序を変更しているおかげだから。
#### 3位 0人
### 8行目
`            if arr[i] > arr[i + 1]:`
#### 1位 1人
- 9 合っていない部分を入れ替えるために、大きさを比較する部分であり、ソートの本質部分であるから。
#### 2位 0人
#### 3位 1人
- 4 lastの決定においても並べ替えにおいてもこの条件が重要だから。ただどんなソートでもこのような比較条件は現れるため。
### 9行目
`                arr[i], arr[i + 1] = arr[i + 1], arr[i]`
#### 1位 1人
- 5 ソートの中での本質的なSwapであるため、もっとも重要であると考えた。
#### 2位 0人
#### 3位 2人
- 7 一回一回のソートアルゴリズムはバブルソートと同様に隣同士の要素を入れ替えていくということであるということがこの行で分かるから．(15行目も同様)
3番である理由は，この行の操作はシェーカーソート特有ではなく，バブルソートなどでも行うことであるから．
- 8 順番を並び替えるための記述で、ソートには必要不可欠だから。基本的なところなので3番とした。
### 10行目
`                last = i`
#### 1位 0人
#### 2位 1人
- 4 1番の行で使うlastを決める行だから。ただ、lastを決めるだけでこの行自体が重要な処理をしているわけではない。
#### 3位 0人
### 11行目
`            i += 1`
#### 1位 0人
#### 2位 0人
#### 3位 1人
- 9 スワップする位置を1ずつずらしている箇所であるから。バブルソートでも行われ、シェーカーソート特有の処理ではないため、3番目と考えている。
### 12行目
`        i = right = last`
#### 1位 2人
- 1 最後にスワップが行われたところから，逆向きに走査を行うというシェーカーソートの考え方を最もよく表していると考えて選択した．
- 4 次にどこから見ていくかを決めるiにlastを使うというのがシェーカーソートの本質だから。
#### 2位 3人
- 6 大きい要素を右に寄せる走査が一巡して、最後に交換が起こった箇所より右はソート済みであるという事実を使うことを示している。1 番よりは細かい性質に言及している。
- 8 ソート済みのところを再び通らなくていいようにするという、計算量を減らすための重要な記述だから。無かったとしても成立するので2番とした。
- 9 カーソルを左から右に切り替える場面であり、なおかつカーソルの右端を左に動かすことでアルゴリズムの流れに大きく関わってくる場面であるから。実際に入れ替えを行う箇所ではないため、1番ではないと考えている。
#### 3位 2人
- 5 特殊な代入演算子を利用しているため、1,2番に置くほど重要ではないがある程度の重要性はあると考えた。
- 11 調べる範囲を狭めていることがわかるから．ここは本質というよりは工夫に近いと思ったから3番目です．
### 13行目
`        while i > left:`
#### 1位 1人
- 10 シェーカーソートでは、両方向からバブルソートをすることが大切だと思ったため。
#### 2位 1人
- 2 シェーカーソートは左右にバブルソートをやるアルゴリズムで、幅が左右からどんどん狭まっていくのが特徴なので、左端をきちんと限定している行が最重要だと考えた。こちらの方が後に出てきているので2番目。
#### 3位 1人
- 3 7行目と合わせて、ほとんどバブルソートと変わらない実装でも多少効率が良くなるのはここの探索順序を変更しているおかげだから。
### 14行目
`            if arr[i - 1] > arr[i]:`
#### 1位 0人
#### 2位 2人
- 10 1番方針に基づいて、後ろから比較するときは、大きい方が後ろに来るようにするのが重要だから。
- 11 大小を連続する2つの要素間で比べていることがわかるから．バブルソートでも同じことをしているので2番目にしました．
#### 3位 0人
### 15行目
`                arr[i - 1], arr[i] = arr[i], arr[i - 1]`
#### 1位 0人
#### 2位 1人
- 5 同じくSwapであるため重要だが、9のほうが先に出ているため2番めに重要だと考えた。
#### 3位 0人
### 16行目
`                last = i`
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 17行目
`            i -= 1`
#### 1位 2人
- 8 右から左に進むという、シェーカーソートがバブルソートと最も違う点が如実に表れている部分だから。
- 11 逆方向に走査していることがわかるから．バブルソートとの違いが大事だと考えました．
#### 2位 0人
#### 3位 0人
### 18行目
`        left = last`
#### 1位 0人
#### 2位 1人
- 1 最後にスワップが行われたところから，逆向きに走査を行うというシェーカーソートの考え方をよく表していると考えて選択した．1番目と同等の重要さだが，便宜上2番目とした．
#### 3位 1人
- 6 小さい要素を左に寄せる走査が一巡して、最後に交換が起こった箇所より左はソート済みであるという事実を使うことを示している。2 番と同様に重要。
### 19行目
`    return arr`
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 20行目
``
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 21行目
``
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 22行目
`N = int(input())`
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 23行目
`A = list(map(int, input().split()))`
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 24行目
``
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 25行目
`print(*shaker_sort(A))`
#### 1位 2人
- 3 このとき方のコアはソートアルゴリズムとしてシェーカーソートを使って解いていることだから。
- 7 この問題の解法では，シェーカーソートと呼ばれるアルゴリズムを用いていることがこの行から分かり，アルゴリズム名を知っている人はどのように解くのかを把握することができるから．
#### 2位 0人
#### 3位 0人
## 他の重要部分
## 自由記述
## 理解度
- とても理解できた。 : 5人, 2 3 4 6 8
- まあ理解できた。 : 6人, 1 5 7 9 10 11
- あまり理解できなかった。 : 0人, 
- まったく理解できなかった。 : 0人, 
