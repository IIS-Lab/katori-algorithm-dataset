# 問題番号18
## 基本情報
- トピック : シェルソート
- 問題リンク : https://drive.google.com/file/d/1TIx0AkrxxxW1MZxFGCpplkjHJe4mMUDP/view?usp=share_link
- 解答リンク : https://atcoder.jp/contests/math-and-algorithm/submissions/37034988
- 解答人数 : 11
- 解答者ID : 1 2 3 4 5 6 7 8 9 10 11
## ソースコード
```py
1  def shell_sort(arr):
2      h = 1
3      while True:
4          if 3 * h + 1 <= len(arr):
5              h = 3 * h + 1
6          else:
7              break
8  
9      while h > 0:
10         for i in range(0, h):
11             for j in range(h + i, len(arr), h):
12                 k = j - h
13                 tmp = arr[j]
14                 while tmp < arr[k] and k > -1:
15                     arr[k + h] = arr[k]
16                     k -= h
17                 arr[k + h] = tmp
18         h //= 3
19 
20     return arr
21 
22 
23 N = int(input())
24 A = list(map(int, input().split()))
25 
26 print(*shell_sort(A))
```
## 重要度の結果
★: 1st, ●: 2nd, ▲: 3rd
```py
def shell_sort(arr):                            1  
    h = 1                                       2  
    while True:                                 3  
        if 3 * h + 1 <= len(arr):               4  ▲
            h = 3 * h + 1                       5  ★●●●▲▲
        else:                                   6  
            break                               7  
                                                8  
    while h > 0:                                9  ●
        for i in range(0, h):                   10 ●
            for j in range(h + i, len(arr), h): 11 ★★★▲
                k = j - h                       12 
                tmp = arr[j]                    13 
                while tmp < arr[k] and k > -1:  14 ●●●▲▲
                    arr[k + h] = arr[k]         15 ★
                    k -= h                      16 ★★
                arr[k + h] = tmp                17 ▲
        h //= 3                                 18 ★★●●●▲▲▲▲
                                                19 
    return arr                                  20 
                                                21 
                                                22 
N = int(input())                                23 
A = list(map(int, input().split()))             24 
                                                25 
print(*shell_sort(A))                           26 ★★
```
## 重要な理由の結果
### 1行目
`def shell_sort(arr):`
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 2行目
`    h = 1`
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 3行目
`    while True:`
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 4行目
`        if 3 * h + 1 <= len(arr):`
#### 1位 0人
#### 2位 0人
#### 3位 1人
- 2 最初の挿入ソートの幅はなるべく広くとりたいので、これが甘くてもアルゴリズムは動くので重要度は下がるが、3番目には重要であると考えた。
### 5行目
`            h = 3 * h + 1`
#### 1位 1人
- 9 シェルソートにおける、hを決めている箇所であり、ソートの間隔を設定するというシェルソート特有の処理を決めている箇所であるから。
#### 2位 3人
- 3 シェルソートはソート間隔を変える、挿入ソートの改良版だが、ここのソート間隔の取り方が一番重要なので。
- 8 hの決め方がいろいろある中で、どれを採用したのかを表しているから。アルゴリズムそのものではないので2番にした。
- 10 シェルソートは、間隔の決め方も重要であるので、2番目に重要であると思った。
#### 3位 2人
- 4 適切なhを決める部分。これはソートの効率に関わるため。ただある程度適当でもソートはできる。
- 11 hの幅を決めている箇所だから．hの幅の決めかたは様々にあるので，3番目の重要度にしました．
### 6行目
`        else:`
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 7行目
`            break`
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 8行目
``
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 9行目
`    while h > 0:`
#### 1位 0人
#### 2位 1人
- 2 シェルソートは挿入ソートの幅が1になるまでやるので、その終了条件を書いている場所が狭める行に次いで重要であると考えた。
#### 3位 0人
### 10行目
`        for i in range(0, h):`
#### 1位 0人
#### 2位 1人
- 6 h 個に分割された列の何番目を対象とするか、というイテレーションであり、h の変化に影響を受ける部分。
#### 3位 0人
### 11行目
`            for j in range(h + i, len(arr), h):`
#### 1位 3人
- 1 特定の間隔で配列を見ることを表しており，シェルソートの考え方の重要な部分だと考えたため．
- 4 hおきにリストを見て、並べ替えるという繰り返しがシェルソートの本質だから。
- 8 間隔hで配列を分割し、ソートしていくというシェルソートの方法がよく表れた一文だから。
#### 2位 0人
#### 3位 1人
- 6 列の分割方法が、index mod h ごとであることがわかる部分。2 番目と同等程度に重要。
### 12行目
`                k = j - h`
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 13行目
`                tmp = arr[j]`
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 14行目
`                while tmp < arr[k] and k > -1:`
#### 1位 0人
#### 2位 3人
- 1 挿入ソートを行うことを端的に表しており，1番目と合わせてシェルソートの考え方を表していると考えたため．配列を特定の間隔で飛ばしながら見るという考え方の方が重要だと考えて2番目に選択した．
- 5 15行目と同様にシェルソートとの類似性がわかるが、hについての言及がなくシェルソートと全く同じ実装であるため2番めに重要だと考えた。
- 11 挿入ソートと同じようにソートをやっているのがわかるから．シェルソートの特色は間隔をあけることなので2番目です．
#### 3位 2人
- 7 間隔hごとに自分より左側に自分より小さい数がないようにソートしていくことでソートが可能であることについて，この条件式で行っているから．
3番である理由は，この部分は挿入ソートなど他のアルゴリズムでも行うものであり，シェルソート特有のものというわけではないから．
- 9 シェルソートにおいて、挿入ソートと同じようにデータの大小に応じて入れ替えを行っている箇所であるから。挿入ソートと同じ箇所ではあるため、1番重要というわけではないと考えている。
### 15行目
`                    arr[k + h] = arr[k]`
#### 1位 1人
- 5 14行目とあわせ、シェルソートが挿入ソートと類似であるという点を確認できるという意味で重要だと考えた。また、差分がhであることも理解できるためもっとも重要とした。
#### 2位 0人
#### 3位 0人
### 16行目
`                    k -= h`
#### 1位 2人
- 10 16行目により前に戻って比較するようにして、間隔ごとに挿入ソートをしていて、重要であると感じた。
- 11 シェルソートで，間隔がhでソートしていることがわかる一行だから．
#### 2位 0人
#### 3位 0人
### 17行目
`                arr[k + h] = tmp`
#### 1位 0人
#### 2位 0人
#### 3位 1人
- 8 ソートするための値の入れ替えを行なっていて、ソートのアルゴリズムをよく表しているから。シェルソート特有のものではないので3番にした。
### 18行目
`        h //= 3`
#### 1位 2人
- 2 シェルソートは挿入ソートの間隔をちょっとずつ狭めていくものなので、その間隔を狭めていっている部分が最重要であると考えた。
- 6 シェルソートにおける、列全体の分割数 h を徐々に減らしていくという特徴を端的に表している。
#### 2位 3人
- 4 hを更新しながらソートしていくというのがシェルソートでは重要だから。ただ処理としては単純。
- 7 シェルソートでは，間隔hを徐々に小さくしながらソートを行なっていくことで可能なアルゴリズムであり，そこが一番特徴的な部分であると思ったから．
1番ではない理由としては，この部分だけではシェルソートでどのようにソートを行うのかの全体は把握できないから．
- 9 シェルソートにおいて、間隔を狭めている箇所であるから。間隔を決めた上でその後で狭めているため、間隔を決めている行ほどは大事ではないと考えている。
#### 3位 4人
- 1 間隔を狭めていくことを表しているおり，1,2番目と合わせてシェルソートの考え方を表していると考えて選択した．挿入ソートを間隔を開けて行うという考え方に比べれば重要度は低いと考えて3番目とした．
- 3 シェルソートは間隔を変えながら行うのが重要なアルゴリズムであるから。
- 5 シェルソートの本質である、間隔を狭めながらソートしていくという部分を表現していて、重要だと考えた。ただし、読解というより見れば分かる部分であるため、3番めに重要とした。
- 10 基本的だが、h//3を忘れないことが大切なので、3番に重要であると思った。
### 19行目
``
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 20行目
`    return arr`
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 21行目
``
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 22行目
``
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 23行目
`N = int(input())`
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 24行目
`A = list(map(int, input().split()))`
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 25行目
``
#### 1位 0人
#### 2位 0人
#### 3位 0人
### 26行目
`print(*shell_sort(A))`
#### 1位 2人
- 3 このとき方のコアはシェルソートをソートアルゴリズムとして採用していることなので。
- 7 この問題の解法では，シェルソートと呼ばれるアルゴリズムを用いていることがこの行から分かり，アルゴリズム名を知っている人はどのように解くのかを把握することができるから．
#### 2位 0人
#### 3位 0人
## 他の重要部分
## 自由記述
## 理解度
- とても理解できた。 : 5人, 1 2 3 6 11
- まあ理解できた。 : 6人, 4 5 7 8 9 10
- あまり理解できなかった。 : 0人, 
- まったく理解できなかった。 : 0人, 
